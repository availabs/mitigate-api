var falcorGraph = require('./graph');
var get = require('lodash.get');
// var hazards = ["geo",[36001,36003,36005,36007,36009,36011,36013,36015,36017,36019,36021,36023,36025,36027,36029,36031,36033,36035,36037,36039,36041,36043,36045,36047,36049,36051,36053,36055,36057,36059,36061,36063,36065,36067,36069,36071,36073,36075,36077,36079,36081,36083,36085,36087,36089,36091,36093,36095,36097,36099,36101,36103,36105,36107,36109,36111,36113,36115,36117,36119,36121,36123],"name"]
let counties = ['36001','36083','36093','36091','36039','36021','36115','36113']
let year =  [2014,2015,2016,2017]
let blockgroups = ['360010137054','360010146143','360010135081','360010144011','360010137073','360010143023','360010136015',
                   '360010135031','360010138023','360010134003','360010135063','360010136014','360010135062','360010135071',
                   '360010138021','360010137072','360010143021','360010135033','360010146141','360010136021','360010137053',
                   '360010003003','360010135082','360010146151','360010023002','360010004034','360010017001','360010005022',
                   '360010020005','360010130002','360010135072','360010144022','360010146082','360010146142','360010142035',
                   '360010145011','360010018015','360010145022','360010146062','360010132003','360010137051','360010128003',
                   '360010015002','360010143012','360010018014','360010008002','360010146133','360010142031','360010138011',
                   '360010022001','360010148022','360010147002','360010148012','360010148032','360010134002','360010020002',
                   '360010021001','360010021002','360010021003','360010025005','360010026002','360010026003','360010026004',
                   '360010129001','360010129003','360010130001','360010130003','360010130004','360010131001','360010131002',
                   '360010132002','360010133001','360010133003','360010127002','360010128001','360010016004','360010022002',
                   '360010138016','360010138017','360010138022','360010139012','360010139023','360010140013','360010140023',
                   '360010142021','360010142034','360010143011','360010146093','360010140021','360010146132','360010019023',
                   '360010001002','360010005013','360010015003','360010142032','360010132005','360010140024','360010018011',
                   '360010006001','360010025004','360010133002','360010005021','360010019012','360010129004','360010007004',
                   '360010014001','360010002002','360010145021','360010137031','360010143024','360010145023','360010146131',
                   '360010014003','360010005011','360010142014','360010139011','360010004033','360010143022','360010007001',
                   '360010002004','360010135032','360010135051','360010135061','360010136011','360010136013','360010136023',
                   '360010136022','360010137061','360010137071','360010138012','360010138013','360010138015','360010139022',
                   '360010140011','360010140012','360010140022','360010141001','360010142011','360010141002','360010141004',
                   '360010142012','360010146061','360010142013','360010142023','360010142024','360010142033','360010144013',
                   '360010144021','360010145012','360010145031','360010145032','360010146063','360010146071','360010146072',
                   '360010146073','360010146074','360010146081','360010146091','360010146092','360010146112','360010146121',
                   '360010148021','360010020003','360010146111','360010147001','360010002001','360010011001','360010015001',
                   '360010016001','360010016003','360010017004','360010018013','360010019011','360010020001','360010020004',
                   '360010026001','360010025001','360010025002','360010025003','360010127001','360010128002','360010129002',
                   '360010130005','360010131003','360010132001','360010133004','360010004032','360010148023','360010139021',
                   '360010135052','360010136012','360010137052','360010138014','360010019022','360010003004','360010023001',
                   '360010127003','360010128004','360010134001','360010001001','360010002003', '360010003001', '360010018012', '360010018021', '360010141003', '360010142022', '360010146075', '360010148011', '360010148031', '360010004011', '360010004031', '360010014002', '360010015004', '360010016002', '360010017002', '360010017003', '360010004041', '360010005012', '360010005014', '360010006002', '360010006003', '360010007002', '360010008001', '360010008003', '360010018023', '360010018024', '360010018022', '360010019021', '360010144012', '360010003002', '360010146144', '360010135083', '360010007003', '360010132004', '360010019013', '360210003003', '360210013003', '360210015001', '360210006002', '360210003001', '360210002001', '360210016001', '360210018002', '360210014003', '360210005001', '360210009002', '360210001001', '360210012002', '360210004011', '360210007003', '360210012003', '360210020001', '360210016003', '360210003002', '360210010005', '360210014002', '360210008001', '360210010002', '360210010001', '360210011001', '360210010004', '360210007001', '360210003004', '360210004023', '360210001002', '360210009001', '360210008002', '360210004022', '360210006003', '360210010003', '360210007005', '360210007004', '360210013004', '360210013002', '360210013001', '360210015002', '360210016002', '360210017001', '360210018001', '360210019002', '360210019001', '360210020002', '360210003005', '360210004021', '360210006001', '360210011003', '360210010006', '360210011004', '360210011002', '360210012001', '360210012004', '360210013005', '360210007002', '360210014001', '360210017002', '360210002002', '360390811011', '360390805024', '360390805023', '360390805012', '360390811013', '360390811023', '360390806001', '360390804011', '360390804021', '360390801001', '360390802021', '360390802011', '360390801003', '360390803004', '360390803003', '360390809001', '360390802012', '360390801002', '360390804012', '360390809002', '360390805021', '360390802022', '360390809003', '360390804013', '360390805022', '360390811022', '360390806002', '360390805011', '360390810003', '360390809004', '360390807003', '360390803001', '360390803002', '360390808001', '360390807001', '360390807002', '360390810001', '360390810002', '360390810004', '360390811021', '360390811012', '360390802013', '360390804022', '360830404002', '360830414001', '360830523044', '360830407003', '360830525031', '360830520043', '360830522033', '360830410002', '360830525014', '360830522012', '360830525012', '360830518004', '360830519014', '360830523043', '360830520041', '360830407004', '360830522034', '360830522035', '360830414002', '360830409003', '360830410001', '360830517021', '360830519023', '360830522041', '360830524043', '360830403003', '360830520045', '360830521021', '360830521031', '360830521032', '360830523045', '360830523031', '360830523041', '360830523042', '360830523013', '360830523011', '360830525013', '360830520042', '360830402004', '360830413002', '360830520021', '360830401005', '360830403002', '360830406001', '360830401002', '360830401003', '360830402001', '360830402005', '360830403001', '360830401001', '360830404001', '360830405002', '360830406002', '360830406003', '360830407002', '360830407001', '360830408001', '360830409004', '360830409002', '360830410003', '360830411003', '360830412002', '360830411001', '360830411002', '360830412001', '360830412003', '360830412004', '360830413001', '360830413003', '360830413004', '360830515002', '360830515003', '360830516001', '360830516002', '360830516003', '360830517022', '360830519022', '360830516004', '360830518002', '360830519013', '360830519021', '360830520031', '360830520032', '360830520044', '360830402002', '360830526011', '360830409001', '360830522032', '360830523012', '360830401004', '360830413005', '360830518003', '360830519011', '360830524032', '360830520033', '360830517011', '360830525021', '360830522031', '360830408002', '360830525023', '360830518001', '360830521012', '360830519012', '360830522011', '360830405001', '360830517012', '360830402003', '360830402006', '360830526032', '360830521011', '360830526031', '360830523046', '360830524021', '360830524031', '360830524033', '360830526012', '360830524034', '360830524041', '360830524042', '360830524044', '360830525011', '360830525024', '360830526021', '360830515001', '360830525022', '360910617011', '360910627003', '360910622001', '360910620002', '360910621001', '360910622002', '360910622003', '360910624032', '360910607022', '360910608002', '360910611001', '360910611002', '360910610005', '360910610006', '360910611004', '360910609012', '360910609022', '360910610002', '360910610003', '360910611006', '360910611007', '360910612001', '360910612003', '360910612004', '360910606021', '360910606013', '360910607012', '360910605031', '360910610004', '360910626011', '360910614033', '360910611003', '360910605022', '360910601011', '360910603002', '360910625032', '360910618002', '360910611005', '360910619014', '360910625051', '360910613012', '360910601021', '360910602001', '360910603001', '360910610001', '360910612002', '360910623001', '360910609021', '360910624041', '360910608001', '360910620003', '360910609011', '360910616003', '360910609013', '360910624033', '360910625011', '360910625012', '360910625082', '360910626021', '360910626022', '360910627001', '360910613031', '360910613025', '360910615001', '360910615002', '360910616001', '360910616002', '360910614032', '360910614011', '360910614012', '360910612005', '360910612006', '360910613022', '360910613011', '360910613021', '360910613023', '360910625094', '360910601013', '360910619013', '360910606022', '360910605021', '360910620001', '360910620004', '360910624031', '360910619033', '360910627002', '360910625031', '360910625033', '360910626012', '360910617012', '360910617021', '360910617022', '360910618001', '360910618003', '360910619011', '360910619012', '360910619031', '360910619032', '360910604001', '360910605011', '360910602002', '360910613024', '360910601022', '360910625081', '360910601023', '360910628001', '360910601012', '360910616004', '360910619015', '360910606011', '360910607013', '360910614031', '360910614041', '360910624052', '360910606012', '360910606023', '360910605023', '360910607021', '360910607023', '360910607011', '360910624051', '360910624053', '360910625091', '360910625083', '360910625062', '360910624061', '360910624034', '360910625072', '360910625061', '360910625071', '360910625092', '360910625093', '360910614034', '360910625063', '360910624062', '360910627004', '360910617023', '360910623002', '360910604002', '360930330044', '360930324032', '360930327003', '360930330042', '360930335002', '360930326022', '360930327002', '360930215002', '360930324042', '360930335001', '360930321015', '360930324041', '360930321012', '360930324023', '360930326023', '360930218002', '360930218003', '360930218004', '360930218005', '360930218006', '360930319001', '360930319002', '360930319003', '360930319004', '360930320001', '360930320005', '360930321014', '360930321011', '360930321022', '360930321021', '360930322002', '360930322004', '360930323003', '360930323001', '360930323002', '360930324021', '360930324022', '360930327001', '360930208001', '360930330032', '360930320003', '360930329021', '360930322003', '360930207003', '360930203002', '360930208003', '360930205003', '360930214002', '360930212003', '360930321013', '360930325041', '360930217003', '360930332002', '360930209004', '360930334002', '360930205001', '360930212002', '360930205005', '360930208004', '360930326011', '360930326021', '360930325032', '360930331022', '360930202001', '360930320004', '360930217002', '360930320006', '360930329014', '360930201011', '360930201012', '360930202002', '360930201022', '360930203001', '360930334003', '360930334001', '360930205002', '360930205004', '360930205006', '360930201021', '360930206001', '360930206002', '360930207001', '360930207002', '360930207004', '360930208002', '360930209001', '360930209002', '360930209003', '360930210011', '360930210021', '360930210022', '360930332001', '360930332004', '360930332003', '360930214001', '360930214003', '360930214004', '360930215003', '360930210023', '360930215001', '360930216001', '360930216002', '360930216003', '360930216004', '360930217001', '360930217004', '360930218001', '360930212001', '360930329025', '360930320002', '360930331023', '360930331024', '360930331025', '360930331021', '360930325042', '360930324043', '360930325021', '360930325022', '360930325031', '360930330021', '360930330031', '360930330041', '360930333002', '360930333001', '360930329011', '360930329012', '360930329013', '360930329022', '360930329023', '360930329024', '360930327004', '360930326012', '360930330043', '360930331011', '360930331012', '360930325033', '360930324031', '360930322001', '361130709003', '361130706011', '361130707021', '361130704002', '361130708001', '361130707012', '361130710002', '361130750002', '361130760003', '361130707011', '361130708004', '361130720001', '361130735002', '361130701002', '361130708003', '361130720002', '361130760002', '361130703002', '361130730001', '361130704001', '361130708002', '361130740002', '361130701001', '361130702001', '361130703001', '361130705001', '361130705002', '361130740001', '361130710001', '361130720003', '361130780001', '361130750001', '361130735001', '361130709001', '361130710003', '361130730003', '361130750003', '361130780003', '361130704003', '361130707022', '361130706012', '361130706021', '361130709002', '361130730002', '361130760001', '361130780002', '361130706022', '361150850001', '361150802001', '361150801002', '361150810001', '361150880003', '361150910002', '361150820014', '361150920001', '361150810003', '361150803001', '361150803003', '361150840003', '361150850002', '361150870002', '361150880002', '361150810004', '361150810002', '361150820011', '361150820021', '361150820013', '361150890002', '361150820022', '361150890003', '361150940002', '361150930002', '361150870001', '361150860001', '361150900003', '361150803002', '361150801001', '361150900002', '361150840002', '361150840001', '361150930001', '361150820015', '361150803004',
                   '361150870003', '361150940001', '361150890001', '361150920002', '361150820012',
                   '361150910001', '361150900001', '361150860002', '361150880004', '361150880001'
]

describe('Geography tools', () => {

    test('CensusAcsByGeoidByYearByKey', done => {
    const getEvent = {
        paths: [
            ['acs', ['36001'], [2014], ['B23008']]
        ],
        method: 'get'
    }
    falcorGraph.respond({queryStringParameters: getEvent}, (error, response) => {
    console.log('response by cenkey', JSON.stringify(response));
expect(get(response, 'jsonGraph.geo.36.2018.population', null)).toBe(null);

done()
})
;
})

test('CensusAcsByGeoidByYearByKey', done => {
    const getEvent = {
        paths: [
            ['acs', ['36','36001'], [2014], ['B23008']]
        ],
        method: 'get'
    }
    falcorGraph.respond({queryStringParameters: getEvent}, (error, response) => {
    console.log('response by state and cenkey', JSON.stringify(response));
expect(get(response, 'jsonGraph.geo.36.2018.population', null)).toBe(null);

done()
})
;
})

afterAll(() => {
    return falcorGraph.close();
})
;

})

/*

test('CensusAcsByGeoidByYearByKey', done => {
    const getEvent = {
        paths: [
            ['acs', ['360010003003'], [2014], ['B01003']]
        ],
        method: 'get'
    }
    falcorGraph.respond({queryStringParameters: getEvent}, (error, response) => {
    console.log('response by blockgroup', JSON.stringify(response));
expect(get(response, 'jsonGraph.geo.36.2018.population', null)).toBe(null);

done()
})
;
})

test('CensusAcsByGeoidByYearByKey', done => {
    const getEvent = {
        paths: `[
				['acs', ['36001014802'],[2014],['B01003']]
			]`,
        method: 'get'
    }
    falcorGraph.respond({queryStringParameters: getEvent}, (error, response) => {
    //console.log('ran hte test', error, response);
    console.log('response by tract', JSON.stringify(response));
//expect(get(response, 'jsonGraph.geo.36.2018.population', null)).toBe(null);
//expect(data['36001'].url).toBe('jsonGraph.geo.36.2018.population')

done()
})
;
})

test('CensusAcsByGeoidByYearByKey', done => {
    const getEvent = {
        paths: `[
				['acs', ['3600161181'],[2014],['B01003']]
			]`,
        method: 'get'
    }
    falcorGraph.respond({queryStringParameters: getEvent}, (error, response) => {
    //console.log('ran hte test', error, response);
    console.log('response by cousub', JSON.stringify(response));
//expect(get(response, 'jsonGraph.geo.36.2018.population', null)).toBe(null);
//expect(data['36001'].url).toBe('jsonGraph.geo.36.2018.population')

done()
})
;
})

test('censusConfig',done => {
    const getEvent ={
        paths : `[
                ['acs','config']
        ]`,
        method: 'get'
    }
    falcorGraph.respond({ queryStringParameters: getEvent }, (error, response) => {
    console.log('response',JSON.stringify(response));
    done()
});
})

test('CensusAcsByGeoidByYearByKey', done => {
    const getEvent = {
        paths: [
        ['acs', blockgroups,[2014],['B01003','B02001']]
    ],
        method: 'get'
    }
    falcorGraph.respond({ queryStringParameters: getEvent }, (error, response) => {
    console.log('response by blockgroup',JSON.stringify(response));
    expect(get(response, 'jsonGraph.geo.36.2018.population', null)).toBe(null);

done()
});
})

test('CensusAcsByGeoidByYearByKey', done => {
    const getEvent = {
        paths: `[
				['acs', ['36001014802'],[2014],['B01003']]
			]`,
        method: 'get'
    }
    falcorGraph.respond({ queryStringParameters: getEvent }, (error, response) => {
    //console.log('ran hte test', error, response);
    console.log('response by tract',JSON.stringify(response));
//expect(get(response, 'jsonGraph.geo.36.2018.population', null)).toBe(null);
//expect(data['36001'].url).toBe('jsonGraph.geo.36.2018.population')

done()
});
})


test('censusGeoidBlockGroups',done => {
    const getEvent ={
        paths: [
            ['geo',counties,'blockgroup']
        ],
        method: 'get'
    }
    falcorGraph.respond({ queryStringParameters: getEvent }, (error, response) => {
    console.log('response blockgroups',JSON.stringify(response));
//expect(+data.byGeoid['36001'].cousub).toBe(01099)
done()
});
})

test('CensusAcsByGeoidByYearByKey', done => {
    const getEvent = {
        paths: `[
				['acs', ['36001014802'],[2016],['B01003']]
			]`,
        method: 'get'
    }
    falcorGraph.respond({ queryStringParameters: getEvent }, (error, response) => {
    //console.log('ran hte test', error, response);
    console.log('response by tract',JSON.stringify(response));
//expect(get(response, 'jsonGraph.geo.36.2018.population', null)).toBe(null);
//expect(data['36001'].url).toBe('jsonGraph.geo.36.2018.population')

done()
});
})

test('censusGeoidTracts',done => {
    const getEvent ={
        paths: `[
                ['geo',['36001'],'tracts']
            ]`,
        method: 'get'
    }
    falcorGraph.respond({ queryStringParameters: getEvent }, (error, response) => {
    console.log('response tracts',JSON.stringify(response));
//expect(+data.byGeoid['36001'].cousub).toBe(01099)
done()
});
})


test('censusGeoidCousubs',done => {
    const getEvent ={
        paths: `[
                ['geo',['36001'],'cousubs']
            ]`,
        method: 'get'
    }
    falcorGraph.respond({ queryStringParameters: getEvent }, (error, response) => {
    console.log('response cousubs',JSON.stringify(response));
//expect(+data.byGeoid['36001'].cousub).toBe(01099)
done()
});
})
test('CensusAcsByGeoidByYearByKey', done => {
    const getEvent = {
        paths: `[
				['acs', ['3600161181','3600106211'],[2014],['B01003']]
			]`,
        method: 'get'
    }
    falcorGraph.respond({ queryStringParameters: getEvent }, (error, response) => {
    //console.log('ran hte test', error, response);
    console.log('response by cousub',JSON.stringify(response));
//expect(get(response, 'jsonGraph.geo.36.2018.population', null)).toBe(null);
//expect(data['36001'].url).toBe('jsonGraph.geo.36.2018.population')

done()
});
})




 */


